{"version":3,"sources":["../middleware/is-auth.js","../models/search_model.js","../controller/controller_search.js","../routes/router_search.js","app.js","index.js"],"names":["module","exports","req","res","next","mongoose","require","Schema","searchSchema","searchText","type","String","required","model","Search","getSearches","find","then","search","render","pageTitle","path","console","log","catch","err","getSearchPage","access_token","projects_count","projects","counter","found_search","query","srchq","axios","get","headers","response","data","count","texts","i","text","html","send","error","getPdfText","getMainPage","getTestingPage","getSearchTestPage","getLandingTestPage","express","isAuth","router","Router","searchController","app","url","connectionParams","useNewUrlParser","useUnifiedTopology","searchRoutes","connect","use","static","set","engine","__express","port","listen"],"mappings":"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","file":"index.js","sourceRoot":"../src","sourcesContent":["module.exports = (req, res, next) => {\n    next();\n  };","const mongoose = require('mongoose');\n\nvar Schema = mongoose.Schema;\n\nvar searchSchema = new Schema({\n  searchText: {\n    type: String,\n    required: true\n  }\n  // description: {\n  //   type: String,\n  //   required: true\n  // },\n  // image: {\n  //   public_id: {\n  //     type: String\n  //   },\n  //   url: {\n  //     type: String,\n  //     required: true\n  //   }\n  // },\n  // userId: {\n  //   type: mongoose.Schema.Types.ObjectId,\n  //   required: true,\n  //   ref: 'User'\n  // }\n});\n\nmodule.exports = mongoose.model('Search', searchSchema);\n","// const fs = require('fs');\n// const path = require('path');\n// const PDFDocument = require('pdfkit');\nconst Search = require('../models/search_model');\n//\n//var html = $('html')\n\nimport 'regenerator-runtime/runtime';\nimport axios from 'axios';\nexports.getSearches = (req, res, next) => {\n  Search.find()\n    .then(search => {\n      res.render('search/index', {\n        search: search,\n        pageTitle: search,\n        path: '/'\n      });\n      console.log(search);\n    })\n    .catch(err => console.log(err));\n};\n\nexports.getSearchPage = (req, res, next) => {\n  const access_token = '3267694242802c23f79fea3dbc90a0877845de1e';\n  const projects_count = 'http://www.archtscience.com:8070/api/projects/';\n  const projects = \"http://www.archtscience.com:8070/api/dm/tasks/\";\n  var counter, found_search;\n  if (req.query.srchq === \"\") {\n    res.render('search/create-new', {\n      path: '/create'\n    });\n  } else {\n\n    axios.get(projects_count, {\n      headers: {\n        'Authorization': `Token  ${access_token}`\n      }\n    })\n      .then(response => {\n        // access parsed JSON response data using response.data field\n        console.log(response.data.count)\n        counter = response.data.count\n        var texts;\n        for (let i = 1; i <= response.data.count; i++) {\n          axios.get(projects + i, {\n            headers: {\n              'Authorization': `Token  ${access_token}`\n            }\n          })\n            .then(response => {\n              // access parsed JSON response data using response.data field\n              console.log(response.data.data.text)\n              texts += '<h1>' + response.data.data.text + '</h1><br/>';\n              //res.write('<span>' + response.data.data.text + '</span><br/>');\n              if(i == counter){\n                console.log(\"!!!!!!!!!!!!!!!!!!!\");\n                res.render('search/create-new', function (err, html) {\n                  res.send(texts);\n                })\n              }else{\n                console.log(\"I is \"+i+ \" response.data.count \"+response.data.count);\n              }\n              //req.body.charactersList = '<span>' + response.data.data.text + '</span><br/>'\n            })\n            .catch(error => {\n              console.log(error)\n            })\n        }\n\n      })\n      .catch(error => {\n        console.log(error)\n      });\n\n\n    // axios.get(projects, {\n    //   headers: {\n    //     'Authorization': `Token  ${access_token}`\n    //   }\n    // })\n    //   .then(response => {\n    //     // access parsed JSON response data using response.data field\n    //     console.log(response.data.data.text)\n    //   })\n    //   .catch(error => {\n    //     console.log(error)\n    //   })\n\n  }\n\n};\nexports.getPdfText = (req, res, next) => {\n  res.render('search/pdf-to-txt', {\n    path: '/pdftotxt'\n  });\n\n};\nexports.getMainPage = (req, res, next) => {\n  res.render('search/index', {\n    path: '/index'\n  });\n\n};\nexports.getTestingPage = (req, res, next) => {\n  res.render('search/tests', {\n    path: '/tests'\n  });\n\n};\n\nexports.getSearchTestPage = (req, res, next) => {\n  res.render('search/search-test', {\n    path: '/search-test'\n  });\n\n};\n\nexports.getLandingTestPage = (req, res, next) => {\n  res.render('landing_test/atchitexts', {\n    path: '/atchitexts'\n  });\n};\n","const path = require('path');\nconst express = require('express');\nconst isAuth = require('../middleware/is-auth');\nconst router = express.Router();\nconst searchController = require(\"../controller/controller_search\");\nmodule.exports = router;\nrouter.get('/morning', isAuth, searchController.getSearches);\nrouter.get('/create', isAuth, searchController.getSearchPage);\nrouter.get('/pdftotxt', isAuth, searchController.getPdfText);\nrouter.get('/', isAuth, searchController.getMainPage);\nrouter.get('/tests', isAuth, searchController.getTestingPage);\nrouter.get('/search-test', isAuth, searchController.getSearchTestPage);\nrouter.get('/landing-test', isAuth, searchController.getLandingTestPage);\n//router.post('/create', isAuth, searchController.getResultSearch);","const express = require('express');\n\nconst html = `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <title>A JavaScript project</title>\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n</head>\n<body>\n  <h1>A JavaScript project</h1>\n</body>\n</html>`;\nconst app = express();\nconst mongoose = require('mongoose');\nconst url = `mongodb+srv://azatsoft:PUn38zyJUyuge5xG@cluster0.azu6g.gcp.mongodb.net/myFirstDatabase?retryWrites=true&w=majority`;\nconst connectionParams={ useNewUrlParser: true, useUnifiedTopology: true }\nconst searchRoutes = require(\"../routes/router_search\");\nconst searchController = require(\"../controller/controller_search\");\nmongoose.connect(url,connectionParams)\n    .then( () => {\n        console.log('Connected to database ')\n    })\n    .catch( (err) => {\n        console.error(`Error connecting to the database. \\n${err}`);\n    });\n//app.use('/controller',searchController);\napp.use(searchRoutes);\napp.use(express.static('public'));\napp.use('/css', express.static('public/css'))\napp.use('/images', express.static('public/images'))\napp.use('/js', express.static('public/js'))\napp.set('view engine', 'html');\napp.engine('.html', require('ejs').__express);\napp.set(\"views\", \"views\");\n\nmodule.exports = app;","const app = require('./app');\n\nconst port = '8888';\n\napp.listen(port, () => {\n  console.log(`Server is listening on port ${port}...`);\n});"]}